COMANDOS ÚTILES - SISTEMA DE PARQUEADERO
=========================================

DESARROLLO LOCAL
----------------

Verificar configuración:
  python check_config.py

Generar SECRET_KEY:
  python generate_secret_key.py

Iniciar servidor (Windows):
  start_dev.bat

Iniciar servidor (Linux/Mac):
  chmod +x start_dev.sh
  ./start_dev.sh

Iniciar servidor manual:
  python manage.py runserver

Iniciar en puerto específico:
  python manage.py runserver 8080


MIGRACIONES
-----------

Crear migraciones:
  python manage.py makemigrations

Aplicar migraciones:
  python manage.py migrate

Ver migraciones pendientes:
  python manage.py showmigrations

Revertir migración:
  python manage.py migrate parking 0001


BASE DE DATOS
-------------

Crear superusuario:
  python manage.py createsuperuser

Inicializar medios de pago:
  python manage.py init_payment_methods

Resetear superadmin:
  python manage.py reset_superadmin

Limpiar usuarios duplicados:
  python manage.py clean_duplicate_users

Abrir shell de Django:
  python manage.py shell

Ejecutar SQL directo:
  python manage.py dbshell


ARCHIVOS ESTÁTICOS
------------------

Recolectar archivos estáticos:
  python manage.py collectstatic

Recolectar sin confirmación:
  python manage.py collectstatic --noinput

Limpiar archivos estáticos:
  python manage.py collectstatic --clear --noinput


TESTING Y DEBUGGING
-------------------

Verificar sistema:
  python manage.py check

Verificar con deployment checks:
  python manage.py check --deploy

Ejecutar tests:
  python manage.py test

Ejecutar tests específicos:
  python manage.py test parking.tests

Ver configuración actual:
  python manage.py diffsettings


PRODUCCIÓN
----------

Iniciar con Gunicorn:
  gunicorn parking_system.wsgi:application

Gunicorn con workers:
  gunicorn parking_system.wsgi:application --workers 4

Gunicorn con bind específico:
  gunicorn parking_system.wsgi:application --bind 0.0.0.0:8000

Gunicorn con logs:
  gunicorn parking_system.wsgi:application --access-logfile - --error-logfile -


MANTENIMIENTO
-------------

Limpiar sesiones expiradas:
  python manage.py clearsessions

Limpiar caché:
  python manage.py clear_cache

Ver usuarios activos:
  python manage.py shell
  >>> from django.contrib.auth.models import User
  >>> User.objects.filter(is_active=True).count()

Backup de base de datos (SQLite):
  copy db.sqlite3 db.sqlite3.backup

Backup de base de datos (PostgreSQL):
  pg_dump -U usuario -h host nombre_db > backup.sql


GIT
---

Ver estado:
  git status

Agregar cambios:
  git add .

Commit:
  git commit -m "Descripción del cambio"

Push a repositorio:
  git push origin main

Pull cambios:
  git pull origin main


DOCKER (OPCIONAL)
-----------------

Construir imagen:
  docker build -t parking-system .

Ejecutar contenedor:
  docker run -p 8000:8000 parking-system

Docker Compose:
  docker-compose up -d


TROUBLESHOOTING
---------------

Error de migraciones:
  python manage.py migrate --fake-initial

Error de permisos:
  python manage.py collectstatic --clear
  python manage.py collectstatic --noinput

Error de caché:
  python manage.py shell
  >>> from django.core.cache import cache
  >>> cache.clear()

Ver logs en producción:
  tail -f /var/log/gunicorn/error.log


VARIABLES DE ENTORNO
--------------------

Ver variables actuales (Windows):
  set

Ver variables actuales (Linux/Mac):
  printenv

Establecer variable temporal (Windows):
  set DEBUG=False

Establecer variable temporal (Linux/Mac):
  export DEBUG=False
